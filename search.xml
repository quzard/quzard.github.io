<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>使用xquartz转发miniedit</title>
      <link href="/2023/05/05/%E4%BD%BF%E7%94%A8xquartz%E8%BD%AC%E5%8F%91miniedit/"/>
      <url>/2023/05/05/%E4%BD%BF%E7%94%A8xquartz%E8%BD%AC%E5%8F%91miniedit/</url>
      
        <content type="html"><![CDATA[<p>XQuartz 是 macOS 上的一个开源 X Window System 实现，可以让你在 macOS 上运行图形界面的 Linux/Unix 程序。要通过 XQuartz 转发 Python <a href="http://miniedit.py">miniedit.py</a>，请按照以下步骤操作：</p><ol><li>首先，确保您已安装了 XQuartz。如果没有，请访问 XQuartz 官方网站 (<a href="https://www.xquartz.org/">https://www.xquartz.org</a>) 下载并安装。</li><li>安装完成后，启动 XQuartz 应用程序。这将在 Dock 中打开一个新的 XQuartz 图标。</li><li>启动终端或您喜欢的终端应用程序。</li><li>使用 SSH 连接到远程 Linux/Unix 服务器。在命令行中输入以下命令：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -X your_username@remote_server_address</span><br></pre></td></tr></table></figure><p>在这里，<code>your_username</code> 是您在远程服务器上的用户名，<code>remote_server_address</code> 是远程服务器的 IP 地址或主机名。<code>-X</code> 选项表示启用 X11 转发。</p><ol start="5"><li>确保远程服务器上安装了 Python 和 Mininet。如果没有，请按照 Mininet 官方文档 (<a href="http://mininet.org/download/">http://mininet.org/download/</a>) 安装。</li><li>在远程服务器上，转到包含 <code>miniedit.py</code> 的目录。如果您已将 Mininet 安装在默认位置，则可以输入以下命令：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /Path/mininet/examples/</span><br></pre></td></tr></table></figure><ol start="7"><li>运行 <code>miniedit.py</code>：</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python miniedit.py</span><br></pre></td></tr></table></figure><p>这将启动 Mininet 的 MiniEdit 图形界面。由于您已启用 X11 转发，界面将显示在您的 macOS 计算机上。</p><p>请注意，由于网络延迟，图形界面的响应速度可能会受到影响。</p>]]></content>
      
      
      <categories>
          
          <category> mac </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>xrdp</title>
      <link href="/2023/03/20/xrdp/"/>
      <url>/2023/03/20/xrdp/</url>
      
        <content type="html"><![CDATA[<h2 id="一、安装桌面环境">一、安装桌面环境</h2><ul><li>安装 Gnome</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install ubuntu-desktop</span><br></pre></td></tr></table></figure><h2 id="二、安装-Xrdp">二、安装 Xrdp</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install xrdp</span><br></pre></td></tr></table></figure><h2 id="三、配置">三、配置</h2><p>默认情况下，Xrdp 使用<code>/etc/ssl/private/ssl-cert-snakeoil.key</code>,它仅仅对“ssl-cert” 用户组成语可读。运行下面的命令，将<code>xrdp</code>用户添加到这个用户组：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser xrdp ssl-cert</span><br></pre></td></tr></table></figure><p>重启 Xrdp 服务，使得修改生效：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart xrdp</span><br></pre></td></tr></table></figure><h2 id="四、解决黑屏">四、解决黑屏</h2><h3 id="1-添加配置文件">1. 添加配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.xsessionrc</span><br><span class="line"></span><br><span class="line">添加：</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> GNOME_SHELL_SESSION_MODE=ubuntu</span><br><span class="line"><span class="built_in">export</span> XDG_CURRENT_DESKTOP=ubuntu:GNOME</span><br><span class="line"><span class="built_in">export</span> XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg</span><br></pre></td></tr></table></figure><h3 id="2-重启xrdp服务">2. 重启xrdp服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart xrdp.service</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>mac自动制作所有备份卷的新快照</title>
      <link href="/2023/02/14/mac%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD/"/>
      <url>/2023/02/14/mac%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD/</url>
      
        <content type="html"><![CDATA[<h2 id="方法1-使用-LaunchAgent">方法1 使用 LaunchAgent</h2><ol><li><p>创建一个 LaunchAgent 文件到~/Library/LaunchAgents/中,文件名为com.quzard.DailyTimeMachineBackup.plist</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">plist</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">string</span>&gt;</span>com.quzard.DailyTimeMachineBackup<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>/usr/bin/tmutil<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>localsnapshot<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>StandardErrorPath<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">string</span>&gt;</span>/tmp/DailyTimeMachineBackupErr.log<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>StandardOutPath<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">string</span>&gt;</span>/tmp/DailyTimeMachineBackupOut.log<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">key</span>&gt;</span>StartCalendarInterval<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Minute<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">integer</span>&gt;</span>0<span class="tag">&lt;/<span class="name">integer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure><p>各条目解释：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Label：对应的需要保证全局唯一性;</span><br><span class="line">Program：要运行的程序;</span><br><span class="line">ProgramArguments：命令语句;</span><br><span class="line">StartCalendarInterval：运行的时间，单个时间点使用dict，多个时间点使用 array &lt;dict&gt;;</span><br><span class="line">StartInterval：时间间隔，与StartCalendarInterval使用其一，单位为秒;</span><br><span class="line">StandardInPath、StandardOutPath、StandardErrorPath：标准的输入输出错误文件，这里建议不要使用 .log 作为后缀，会打不开里面的信息;</span><br><span class="line">定时启动任务时，如果涉及到网络，但是电脑处于睡眠状态，是执行不了的，这个时候，可以定时的启动屏幕就好了。</span><br></pre></td></tr></table></figure></li><li><p>通过 launchctl manageruid 命令 获取 uid</p></li><li><p>开启守护进程</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">launchctl load ~/Library/LaunchAgents/com.quzard.DailyTimeMachineBackup.plist</span><br></pre></td></tr></table></figure></li><li><p>查看守护进程是否启动成功</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">当返回的结果第一个位置有数字而不是“-”时，说明程序正常运行</span></span><br><span class="line">launchctl list | grep jupyterhub</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or 当列出程序进程信息时，说明程序正常运行</span></span><br><span class="line">pstree | grep jupyterhub ｜ grep -v grep</span><br></pre></td></tr></table></figure></li></ol><h2 id="方法2-使用-crontab">方法2 使用 crontab</h2><ol><li><p>使用终端，crontab -e</p></li><li><p>添加以下代码</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 * * * * /usr/bin/tmutil localsnapshot</span><br></pre></td></tr></table></figure><p><code>tmutil</code>这个 crontab 条目说在每小时 0 分钟运行命令。</p></li><li><p>授予<code>cron</code>运行所需的权限</p><ol><li><p>从 Apple 菜单中打开“系统偏好设置”，然后选择“安全性与隐私”图标。</p></li><li><p>然后选择“隐私”选项卡并滚动左侧列表并选择“完全磁盘访问权限”。</p></li><li><p>选择左下角的锁定图标并输入管理员的凭据。</p></li><li><p>选择应用程序列表下方的 + 图标</p></li><li><p>键入Cmd+shift+g 显示路径入口文件选择界面并键入：/usr/sbin/cron并选择<code>cron</code>二进制文件</p></li></ol></li></ol><h2 id="参考链接">参考链接</h2><ul><li><a href="https://www.launchd.info/">https://www.launchd.info/</a></li><li><a href="https://geekanddad.wordpress.com/2022/02/07/automatic-once-a-day-time-machine-backups/">Automatic Once-a-Day Time Machine Backups</a></li><li><a href="https://alvinalexander.com/mac-os-x/launchd-plist-examples-startinterval-startcalendarinterval/">MacOS launchd plist StartInterval and StartCalendarInterval examples</a></li><li><a href="https://www.mathscv.com/2021/12/20/mac-launchctl-plist/">Mac 上通过 launchctl 开启守护进程</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>备份速度</title>
      <link href="/2023/02/10/Mac%20%E6%9A%82%E6%97%B6%E6%8F%90%E5%8D%87Time%20Machine%20%E5%A4%87%E4%BB%BD%E9%80%9F%E5%BA%A6/"/>
      <url>/2023/02/10/Mac%20%E6%9A%82%E6%97%B6%E6%8F%90%E5%8D%87Time%20Machine%20%E5%A4%87%E4%BB%BD%E9%80%9F%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<p>由于Mac 预设将TimeMachine 的执行层级设定为最低，这样一来它在背景执行时，才不会影响到一般的正常工作。不过当你确定电脑暂时要全心全力的投入备份的话，可以透过终端机工具输入以下指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl debug.lowpri_throttle_enabled=0</span><br></pre></td></tr></table></figure><p>由于用到sudo 指令，会请你在终端机确认管理员权限，此项功能无需重开机即可生效。输入完毕后，你会发现速度有了一定程度的提升。</p><p>当你备份完毕后，请记得将指令反向输入回来，也就是：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl debug.lowpri_throttle_enabled=1</span><br></pre></td></tr></table></figure><p>不过经过测试后，发现重开机后其实设定也会回归0 的状态。</p>]]></content>
      
      
      <categories>
          
          <category> mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>apfs快照</title>
      <link href="/2023/02/10/apfs%E5%BF%AB%E7%85%A7/"/>
      <url>/2023/02/10/apfs%E5%BF%AB%E7%85%A7/</url>
      
        <content type="html"><![CDATA[<p>mac的磁盘是apfs格式，支持apfs快照功能，可以在在 Mac 上的“磁盘工具”中查看 APFS 快照，详情见参考链接[1]，在控制台输入命令行后，会生成 apfs 快照。</p><p>创建快照：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmutil localsnapshot</span><br></pre></td></tr></table></figure><p>检测快照：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tmutil listlocalsnapshots /</span><br></pre></td></tr></table></figure><p>也可以在 <a href="https://bombich.com/">Carbon Copy Cloner 6</a> 软件中，看到创建好的快照，甚至可以用 CCC 来恢复，教育优惠29.99美元/214.76人民币。速度比time machine快很多，支持启动盘启动。</p><h2 id="time-machine-命令">time machine 命令</h2><h3 id="备份">备份</h3><ul><li><p>tmutil status</p><ul><li>查看状态</li></ul></li><li><p>tmutil currentphase</p><ul><li>time machine目前阶段</li></ul></li><li><p>log show --predicate ‘subsystem == “com.apple.TimeMachine”’ --info --last 4h|grep -i error</p><ul><li>载入 Error 內容</li></ul></li><li><p>log show --predicate ‘subsystem == “com.apple.TimeMachine”’ --info --debug</p><ul><li>载入Debug 模式完整內容</li></ul></li><li><p>printf ‘\e[3J’ &amp;&amp; log show --predicate ‘subsystem == “com.apple.TimeMachine”’ --info --last 6h | grep -F ‘eMac’ | grep -Fv ‘etat’ | awk -F’]’ ‘{print substr($0,1,19), $NF}’</p><ul><li>打印出 Debug 模式重点文字</li></ul></li><li><p>sudo fs_usage -w | grep -i backupd</p><ul><li>监听备份实时状态</li></ul></li><li><p>sudo tmutil enable</p><ul><li>开启自动备份</li></ul></li><li><p>sudo tmutil disable</p><ul><li>关闭自动备份</li></ul></li><li><p>tmutil startbackup [-a | --auto] [-b | --block] [-r | --rotation] [-d | --destination dest_id]</p><ul><li>立即备份</li><li>这与从屏幕顶部的菜单栏中的 “<strong>Time Machine</strong>” 菜单中选择“立即备份”功能相同。<br>可以选择 <code>–auto</code> <code>–block</code> <code>–rotation</code> <code>–destination</code>。建议使用 <code>–auto</code>，因为将使用常规机制安排备份，并且备份与常规自动备份最相似。</li></ul></li><li><p>tmutil stopbackup</p><ul><li>取消当前正在进行的备份</li></ul></li></ul><h3 id="检查备份">检查备份</h3><ul><li><p>tmutil latestbackup [-m] [-t] [-d mount_point]</p><ul><li>打印最新一次的备份路径</li></ul></li><li><p>tmutil listbackups [-m] [-t] [-d mount_point]</p><ul><li>打印此 Mac 的所有备份的路径（当前备份磁盘）</li></ul></li><li><p>tmutil uniquesize path …</p><ul><li>打印备份的实际大小，不包括任何硬链接</li></ul></li><li><p>sudo tmutil calculatedrift machine_directory</p><ul><li>分析备份之间的更改量</li></ul></li><li><p>tmutil compare [-@acdefghlmnstuEX] [-D depth] [-I name]<br>tmutil compare [-@acdefghlmnstuEX] [-D depth] [-I name] snapshot_path<br>tmutil compare [-@acdefghlmnstuEUX] [-D depth] [-I name] path1 path2</p><ul><li><p>比较备份之间的区别</p></li><li><p>如果你不传递任何路径参数，它将会比较当前设备和最新备份。</p><p>如果你不传递任何参数，它将会比较当前设备和最新备份。</p><p>tmutil compare -options path1 path2–一个复杂的命令，用于比较任何两个备份或Mac与最新备份的内容。选项指定要包括在比较中的内容以及在目录树中的显示深度。有关完整的详细信息，请</p></li></ul></li></ul><h3 id="备份过滤控制">备份过滤控制</h3><ul><li>tmutil addexclusion [-p|-v] item …<ul><li>添加项目到排除列表</li><li>-p用于排除固定路径，-v用于整个容量。</li></ul></li><li>tmutil removeexclusion [-p|-v] item …<ul><li>删除排除列表中的指定项目</li><li>-p用于排除固定路径，-v用于整个容量。</li></ul></li><li>tmutil isexcluded item …<ul><li>显示指定项目是否在排除列表中</li></ul></li></ul><h3 id="维护备份">维护备份</h3><ul><li>tmutil verifychecksums path …<ul><li>报告备份中校验和的任何问题（10.11及更高版本）</li></ul></li><li>sudo tmutil delete [-d backup_mount_point -t timestamp] [-p path]<ul><li>删除指定的备份。谨慎使用。删除一组备份的过程可能非常缓慢，从一开始就逐步删除所有备份，并开始稳定进行。</li></ul></li></ul><h3 id="控制备份目标">控制备份目标</h3><ul><li>tmutil destinationinfo [-X]<ul><li>详细说明当前备份目标</li></ul></li><li>tmutil machinedirectory<ul><li>为该Mac打印当前计算机目录的路径</li></ul></li><li>tmutil setdestination [-a]  mount_point<ul><li>将目标设置为给定的mount_point；当不带任何选项使用时，它将替换现有目的地；使用-a选项，会将新目标添加到列表中，而不是替换它。</li></ul></li><li>tmutil setdestination [-ap] afp://user[:pass]@host/share<ul><li>将目标设置为AFP或SMB网络共享。-p选项带来一个交互式提示，用于输入密码。</li></ul></li><li>tmutil removedestination destination_id<ul><li>从列表中删除备份目标；使用destinationinfo给出的destination_id UUID。</li></ul></li><li>tmutil inheritbackup machine_directory<br>tmutil inheritbackup sparse_bundle<ul><li>声明当前Mac的现有备份集（可能是稀疏集）</li></ul></li><li>tmutil associatedisk [-a] mount_point volume_backup_directory<ul><li>通过将卷目录绑定到本地磁盘来重新配置备份历史记录。使用此手册之前，请仔细阅读手册页。</li></ul></li></ul><h2 id="快照">快照</h2><ul><li>tmutil localsnapshot<ul><li>制作所有备份卷的新快照</li></ul></li><li>tmutil listlocalsnapshots &lt;mount_point&gt;<ul><li>列出指定卷的本地快照</li><li>tmutil listlocalsnapshots /</li></ul></li><li>tmutil listlocalsnapshotdates [&lt;mount_point&gt;]<ul><li>列出所有本地快照或指定卷的日期</li></ul></li><li>tmutil deletelocalsnapshots [&lt;mount_point&gt; | &lt;snapshot_date&gt;]<ul><li>删除指定的本地快照，或者删除卷或日期</li></ul></li><li>tmutil thinlocalsnapshots &lt;mount_point&gt; [purgeamount] [urgency]<ul><li>精简本地快照指定的音量。您可以指定要回收的空间的纯净度，以及紧急程度，范围为1-4。</li></ul></li></ul><h2 id="参考链接">参考链接</h2><ol><li><a href="https://support.apple.com/zh-cn/guide/disk-utility/dskuf82354dc/21.0/mac/12.0">在 Mac 上的“磁盘工具”中查看 APFS 快照</a></li><li><a href="https://doofox.cn/time-machine-tmutil.html">使用命令行控制 Time Machine</a></li><li><a href="https://smlpoints.com/guide-mac-monitor-timemachine-status-mac.html">[指南] Mac 監控你的 TimeMachine 是否運行</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>anaconda不支持m1原始python2.7</title>
      <link href="/2023/02/09/anaconda%E4%B8%8D%E6%94%AF%E6%8C%81m1%E5%8E%9F%E5%A7%8Bpython2-7/"/>
      <url>/2023/02/09/anaconda%E4%B8%8D%E6%94%AF%E6%8C%81m1%E5%8E%9F%E5%A7%8Bpython2-7/</url>
      
        <content type="html"><![CDATA[<p><strong>Python 2.7 在osx-arm64</strong>平台发布之前就被淘汰了，所以没有任何这样的构建,且大多数 Python 包也将缺少Python 2.7 的<strong>osx-arm64</strong>构建。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">conda create -n python27 python=2.7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Collecting package metadata (current_repodata.json): <span class="keyword">done</span></span><br><span class="line">Solving environment: failed with repodata from current_repodata.json, will retry with next repodata <span class="built_in">source</span>.</span><br><span class="line">Collecting package metadata (repodata.json): <span class="keyword">done</span></span><br><span class="line">Solving environment: failed</span><br><span class="line"></span><br><span class="line">PackagesNotFoundError: The following packages are not available from current channels:</span><br><span class="line"></span><br><span class="line">  - python=2.7</span><br><span class="line"></span><br><span class="line">Current channels:</span><br><span class="line"></span><br><span class="line">  - https://repo.anaconda.com/pkgs/main/osx-arm64</span><br><span class="line">  - https://repo.anaconda.com/pkgs/main/noarch</span><br><span class="line">  - https://repo.anaconda.com/pkgs/r/osx-arm64</span><br><span class="line">  - https://repo.anaconda.com/pkgs/r/noarch</span><br><span class="line"></span><br><span class="line">To search <span class="keyword">for</span> alternate channels that may provide the conda package you<span class="string">&#x27;re</span></span><br><span class="line"><span class="string">looking for, navigate to</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    https://anaconda.org</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">and use the search bar at the top of the page.</span></span><br></pre></td></tr></table></figure><h2 id="解决方法">解决方法</h2><p><strong>通过 Rosetta 模拟</strong>。Apple 提供了一个 x86_64 模拟器<a href="https://support.apple.com/en-us/HT211861">Rosetta 2</a>，它将运行 x86_64 二进制文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CONDA_SUBDIR=osx-64 conda create -n py27 python=2.7</span><br></pre></td></tr></table></figure><h2 id="参考链接">参考链接</h2><p><a href="https://stackoverflow.com/questions/67380286/anaconda-channel-for-installing-python-2-7">Anaconda channel for installing python 2.7</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>修复开启代理工具下github无法git的问题</title>
      <link href="/2023/02/06/%E4%BF%AE%E5%A4%8D%E5%BC%80%E5%90%AF%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7%E4%B8%8Bgithub%E6%97%A0%E6%B3%95git%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2023/02/06/%E4%BF%AE%E5%A4%8D%E5%BC%80%E5%90%AF%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7%E4%B8%8Bgithub%E6%97%A0%E6%B3%95git%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>使用部分✈️节点代理GitHub时会出现以下问题</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Cloning into <span class="string">&#x27;******&#x27;</span>...</span><br><span class="line">kex_exchange_identification: Connection closed by remote host</span><br><span class="line">Connection closed by 198.18.1.55 port 22</span><br><span class="line">fatal: Could not <span class="built_in">read</span> from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure><h2 id="解决方法1（推荐）">解决方法1（推荐）:</h2><p>改成通过443端口git clone就没问题了<br>ssh配置需要进行一下修改</p><p>修改~/.ssh/config，添加以下内容即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">  Hostname ssh.github.com</span><br><span class="line">  Port 443</span><br><span class="line">  User git</span><br></pre></td></tr></table></figure><h2 id="解决方法2">解决方法2:</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- DST-PORT,22,DIRECT</span><br></pre></td></tr></table></figure><p>不代理22端口的流量，但这样会导致git走直连，速度比较慢</p><h2 id="参考链接：">参考链接：</h2><p><a href="https://docs.github.com/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port">https://docs.github.com/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>防止Parallels自己解除hosts限制</title>
      <link href="/2023/01/26/%E9%98%B2%E6%AD%A2Parallels%E8%87%AA%E5%B7%B1%E8%A7%A3%E9%99%A4hosts%E9%99%90%E5%88%B6/"/>
      <url>/2023/01/26/%E9%98%B2%E6%AD%A2Parallels%E8%87%AA%E5%B7%B1%E8%A7%A3%E9%99%A4hosts%E9%99%90%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="用法">用法</h2><p>不可变标志有<strong>系统</strong>标志以及<strong>用户</strong>标志两种，分别是<code>schg</code>以及<code>uchg</code>。</p><p>启用对hosts的系统不可变标志保护：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chflags uchg /etc/hosts <span class="comment">#锁定Hosts文件，只读，用户标志</span></span><br><span class="line">sudo chflags schg /etc/hosts <span class="comment">#锁定Hosts文件，只读，系统标志</span></span><br></pre></td></tr></table></figure><p>删除对hosts的系统不可变标志保护时，需要查询您的内核安全级别，请使用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl kern.securelevel</span><br></pre></td></tr></table></figure><p>如果返回的结果是<code>0</code>，则代表可以直接使用以下指令删除（其实就是在标志前加个no）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chflags noschg /etc/hosts <span class="comment">#解锁Hosts文件，读写，系统标志</span></span><br><span class="line">sudo chflags nouchg /etc/hosts <span class="comment">#解锁Hosts文件，读写，用户标志</span></span><br></pre></td></tr></table></figure><p>如果返回的结果是<code>1</code>，则需要<strong>使用单用户模式启动电脑</strong>，才能执行以下指令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chflags noschg /etc/hosts <span class="comment">#解锁Hosts文件，读写，系统标志</span></span><br><span class="line">sudo chflags nouchg /etc/hosts <span class="comment">#解锁Hosts文件，读写，用户标志</span></span><br></pre></td></tr></table></figure><h2 id="Mac-Host文件权限">Mac Host文件权限</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> +a <span class="string">&#x27;user:此处请修改为您当前的用户名:allow write&#x27;</span> /etc/hosts</span><br></pre></td></tr></table></figure><p>通过访达 前往 /etc 找到 hosts 文件显示简介 解锁权限修改 everyone 用户权限为 “读和写” 或者为 “无访问权限”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> +a <span class="string">&#x27;user:此处请修改为您当前的用户名:allow read&#x27;</span> /etc/hosts</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>macbook盒盖睡眠唤醒问题</title>
      <link href="/2023/01/25/macbook%E7%9B%92%E7%9B%96%E7%9D%A1%E7%9C%A0%E5%94%A4%E9%86%92%E9%97%AE%E9%A2%98/"/>
      <url>/2023/01/25/macbook%E7%9B%92%E7%9B%96%E7%9D%A1%E7%9C%A0%E5%94%A4%E9%86%92%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="具体配置及系统信息">具体配置及系统信息</h2><ul><li>2021 款的 14 寸 M1Pro MacBook Pro</li><li>Monterey 正式版</li><li>盒盖睡眠前未关Wi-Fi，蓝牙</li></ul><h2 id="终端输出信息">终端输出信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">使用命令 pmset -g <span class="built_in">log</span> | grep DarkWake 查看 DarkWake 唤醒日志</span><br><span class="line"></span><br><span class="line">2023-01-24 23:41:22 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt bluetooth-pcie/ Using BATT (Charge:68%) 7 secs</span><br><span class="line">2023-01-24 23:41:31 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt bluetooth-pcie/ Using BATT (Charge:68%) 12 secs</span><br><span class="line">2023-01-24 23:59:07 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 00:16:27 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 00:23:49 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt bluetooth-pcie/ Using BATT (Charge:68%) 16 secs</span><br><span class="line">2023-01-25 00:24:53 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt bluetooth-pcie/ Using BATT (Charge:68%) 7 secs</span><br><span class="line">2023-01-25 00:25:07 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt bluetooth-pcie/ Using BATT (Charge:68%) 17 secs</span><br><span class="line">2023-01-25 00:42:25 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 00:58:47 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 01:14:02 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 01:30:08 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 01:46:51 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 02:03:20 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 02:19:12 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 02:34:31 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 02:50:56 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 03:00:17 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt wlan/ Using BATT (Charge:68%) 12 secs</span><br><span class="line">2023-01-25 03:01:25 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt wlan/ Using BATT (Charge:68%) 44 secs</span><br><span class="line">2023-01-25 03:17:51 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 03:32:56 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 03:50:30 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:68%) 4 secs</span><br><span class="line">2023-01-25 04:06:13 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 04:23:59 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 04:41:23 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 04:57:37 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 05:15:11 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 05:31:18 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 05:47:30 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 06:04:18 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 06:20:02 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 06:35:07 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 06:52:40 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 07:08:02 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 07:24:39 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 07:41:52 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 07:57:20 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 5 secs</span><br><span class="line">2023-01-25 08:12:40 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 08:30:16 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 08:47:51 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 09:04:51 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 09:10:30 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt wlan/ Using BATT (Charge:67%) 20 secs</span><br><span class="line">2023-01-25 09:12:05 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt wlan/ Using BATT (Charge:67%) 6 secs</span><br><span class="line">2023-01-25 09:13:17 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt wlan/ Using BATT (Charge:67%) 6 secs</span><br><span class="line">2023-01-25 09:30:08 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 09:48:08 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 10:05:08 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 10:21:38 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line">2023-01-25 10:37:50 +0800 DarkWake            DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br></pre></td></tr></table></figure><h2 id="可能的解决方法">可能的解决方法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">有两个事件导致 MacBook 被唤醒。如下：</span><br><span class="line"></span><br><span class="line">1. DarkWake DarkWake from Deep Idle [CDNP] : due to SMC.OutboxNotEmpty smc.70070000 wifibt wlan/ Using BATT (Charge:68%) 12 secs</span><br><span class="line"></span><br><span class="line">2.DarkWake DarkWake from Deep Idle [CDNP] : due to NUB.SPMISw3IRQ nub-spmi0.0x02 rtc/SleepService Using BATT (Charge:67%) 4 secs</span><br><span class="line"></span><br><span class="line">这两个事件均是由于 m1 macbook 强制启用 powernap 导致的。但是我们也有解决方案（需要升级到最新的 macos11.2 RC ）：</span><br><span class="line"></span><br><span class="line">对于第一个问题：这个是由于 tcpkeepalive 引起的，只需在终端使用命令关闭：</span><br><span class="line">sudo pmset -a tcpkeepalive 0</span><br><span class="line"></span><br><span class="line">对于第二个问题：这个是由于 powernap 引起的，首先使用命令关闭 powernap 的 DarkWake 模式下允许进程活动：</span><br><span class="line">sudo pmset -a powernap 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">然后取消勾选这些选项: <span class="string">&quot;系统偏好设置-&gt;电池-&gt;优化电池充电&quot;</span> and <span class="string">&quot;系统偏好设置-&gt;电池-&gt;电源适配器-&gt;唤醒以供网络访问&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">使用 -a 以同时适用于电池和电源。执行 pmset -g custom 可以查看所有场景下的电源设定</span><br><span class="line">pmset -a：调整任何条件下的睡眠计划</span><br><span class="line">pmset -c：调整外部供电的睡眠计划</span><br><span class="line">pmset -b：调整电池供电的睡眠计划</span><br><span class="line">pmset -g：查看计划</span><br><span class="line"></span><br><span class="line"><span class="comment"># 休眠时不联网，禁用 TCP 保持活力机制，防止每 2 小时醒来一次</span></span><br><span class="line">sudo pmset -a tcpkeepalive 0</span><br><span class="line"><span class="comment"># 禁用电源小憩：用于定期唤醒计算机以进行网络和更新</span></span><br><span class="line">sudo pmset -a powernap 0</span><br><span class="line"><span class="comment"># 关闭 standby 模式</span></span><br><span class="line">sudo pmset -b standby 0</span><br><span class="line"><span class="comment"># 开启远程使用时允许睡眠</span></span><br><span class="line">sudo pmset -a ttyskeepawake 0</span><br><span class="line"></span><br><span class="line">m1 关机断电盒盖后一段时间会重置SMC（以上部分也会被重置）</span><br></pre></td></tr></table></figure><h2 id="设置">设置</h2><h3 id="原先设置">原先设置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">pmset -g custom</span><br><span class="line"></span><br><span class="line">Battery Power:</span><br><span class="line"> Sleep On Power Button 1</span><br><span class="line"> lowpowermode         0</span><br><span class="line"> standby              1</span><br><span class="line"> ttyskeepawake        1</span><br><span class="line"> hibernatemode        3</span><br><span class="line"> powernap             1</span><br><span class="line"> hibernatefile        /var/vm/sleepimage</span><br><span class="line"> displaysleep         2</span><br><span class="line"> <span class="built_in">sleep</span>                1</span><br><span class="line"> tcpkeepalive         1</span><br><span class="line"> lessbright           1</span><br><span class="line"> disksleep            10</span><br><span class="line"> SleepServices        0</span><br><span class="line">AC Power:</span><br><span class="line"> Sleep On Power Button 1</span><br><span class="line"> lowpowermode         0</span><br><span class="line"> standby              1</span><br><span class="line"> ttyskeepawake        1</span><br><span class="line"> hibernatemode        3</span><br><span class="line"> powernap             1</span><br><span class="line"> hibernatefile        /var/vm/sleepimage</span><br><span class="line"> displaysleep         10</span><br><span class="line"> womp                 0</span><br><span class="line"> networkoversleep     0</span><br><span class="line"> <span class="built_in">sleep</span>                1</span><br><span class="line"> tcpkeepalive         1</span><br><span class="line"> disksleep            10</span><br><span class="line"> SleepServices        0</span><br></pre></td></tr></table></figure><h3 id="当前设置">当前设置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Battery Power:</span><br><span class="line"> Sleep On Power Button 1</span><br><span class="line"> lowpowermode         0</span><br><span class="line"> standby              0</span><br><span class="line"> ttyskeepawake        0</span><br><span class="line"> hibernatemode        3</span><br><span class="line"> powernap             0</span><br><span class="line"> hibernatefile        /var/vm/sleepimage</span><br><span class="line"> displaysleep         2</span><br><span class="line"> <span class="built_in">sleep</span>                1</span><br><span class="line"> tcpkeepalive         0</span><br><span class="line"> lessbright           1</span><br><span class="line"> disksleep            10</span><br><span class="line"> SleepServices        0</span><br><span class="line">AC Power:</span><br><span class="line"> Sleep On Power Button 1</span><br><span class="line"> lowpowermode         0</span><br><span class="line"> standby              1</span><br><span class="line"> ttyskeepawake        0</span><br><span class="line"> hibernatemode        3</span><br><span class="line"> powernap             0</span><br><span class="line"> hibernatefile        /var/vm/sleepimage</span><br><span class="line"> displaysleep         10</span><br><span class="line"> womp                 0</span><br><span class="line"> networkoversleep     0</span><br><span class="line"> <span class="built_in">sleep</span>                1</span><br><span class="line"> tcpkeepalive         0</span><br><span class="line"> disksleep            10</span><br><span class="line"> SleepServices        0</span><br></pre></td></tr></table></figure><h2 id="设置后结果">设置后结果</h2><p>存在AOP.OutboxNotEmpty的唤醒，但不知道这个是啥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">2023-01-25 17:21:51 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:100%) 9 secs</span><br><span class="line">2023-01-25 18:25:29 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:100%) 11 secs</span><br><span class="line">2023-01-25 19:29:05 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:100%) 10 secs</span><br><span class="line">2023-01-25 20:32:38 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:100%) 10 secs</span><br><span class="line">2023-01-26 01:06:09 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:76%) 15 secs</span><br><span class="line">2023-01-26 02:09:30 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:75%) 11 secs</span><br><span class="line">2023-01-26 03:00:15 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to SMC.OutboxNotEmpty smc.70070000 wifibt wlan/ Using BATT (Charge:75%) 11 secs</span><br><span class="line">2023-01-26 04:03:52 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:75%) 14 secs</span><br><span class="line">2023-01-26 05:07:32 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:74%) 5 secs</span><br><span class="line">2023-01-26 06:10:43 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:74%) 6 secs</span><br><span class="line">2023-01-26 07:14:07 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:74%) 10 secs</span><br><span class="line">2023-01-26 08:17:44 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:74%) 10 secs</span><br><span class="line">2023-01-26 09:21:15 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:74%) 11 secs</span><br><span class="line">2023-01-26 10:24:29 +0800 DarkWake            DarkWake from Deep Idle [CDN] : due to AOP.OutboxNotEmpty spu_queue_overflow_ep42/ Using BATT (Charge:74%) 17 secs</span><br></pre></td></tr></table></figure><h2 id="参考帖子">参考帖子</h2><p><a href="https://www.v2ex.com/t/733474">外置屏幕频繁被唤醒又休眠。这是 m1 的通病？</a></p><p><img src="https://s2.loli.net/2023/01/25/NtSTcBxqQKMwbp7.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>腾讯云一键安装ubuntu 18.04 64位系统</title>
      <link href="/2023/01/11/%E8%85%BE%E8%AE%AF%E4%BA%91%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85ubuntu%2018.04%2064%E4%BD%8D%E7%B3%BB%E7%BB%9F/"/>
      <url>/2023/01/11/%E8%85%BE%E8%AE%AF%E4%BA%91%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85ubuntu%2018.04%2064%E4%BD%8D%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h3 id="安装依赖">安装依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y xz-utils openssl gawk file</span><br></pre></td></tr></table></figure><h3 id="下载一键脚本">下载一键脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -qO InstallNET.sh <span class="string">&#x27;https://raw.githubusercontent.com/MoeClub/Note/master/InstallNET.sh&#x27;</span> &amp;&amp; <span class="built_in">chmod</span> a+x InstallNET.sh</span><br><span class="line"></span><br><span class="line">sed -i <span class="string">&quot;&quot;</span> <span class="string">&quot;s/http:\/\/archive.ubuntu.com/https:\/\/mirrors.tencentyun.com/g&quot;</span> InstallNET.sh</span><br></pre></td></tr></table></figure><h2 id="使用">使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br><span class="line">    bash InstallNET.sh      -d/--debian [dist-name]</span><br><span class="line">                            -u/--ubuntu [dist-name]</span><br><span class="line">                            -c/--centos [dist-version]</span><br><span class="line">                            -v/--ver [32/i386|64/amd64]</span><br><span class="line">                            --ip-addr/--ip-gate/--ip-mask</span><br><span class="line">                            -apt/-yum/--mirror</span><br><span class="line">                            -<span class="built_in">dd</span>/--image</span><br><span class="line">                            -a/-m</span><br><span class="line"></span><br><span class="line"><span class="comment"># dist-name：发行版本代号</span></span><br><span class="line"><span class="comment"># dist-version：发行版本号</span></span><br><span class="line"><span class="comment"># -apt/-yum/--mirror：使用定义镜像</span></span><br><span class="line"><span class="comment"># -a/-m：询问是否能进入VNC自行操作。-a 为不提示(一般用于全自动安装)，-m 为提示。</span></span><br></pre></td></tr></table></figure><h3 id="示例">示例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用默认镜像全自动安装 ubuntu 18.04 x64</span></span><br><span class="line">bash InstallNET.sh -u 18.04 -v 64 -a --mirror <span class="string">&#x27;https://mirrors.tencentyun.com/ubuntu/&#x27;</span></span><br></pre></td></tr></table></figure><p>可以在腾讯云后台vnc查看，因为中间可能需要一些手动操作</p><p>安装后默认用户:   root</p><p>密码:   <a href="http://MoeClub.org">MoeClub.org</a></p><p>Ubuntu 腾讯源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&#x27;</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string">deb http://mirrors.tencentyun.com/ubuntu/ bionic main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb http://mirrors.tencentyun.com/ubuntu/ bionic-security main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb http://mirrors.tencentyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span></span><br><span class="line"><span class="string">#deb http://mirrors.tencentyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="string">#deb http://mirrors.tencentyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb-src http://mirrors.tencentyun.com/ubuntu/ bionic main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb-src http://mirrors.tencentyun.com/ubuntu/ bionic-security main restricted universe multiverse</span></span><br><span class="line"><span class="string">deb-src http://mirrors.tencentyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span></span><br><span class="line"><span class="string">#deb-src http://mirrors.tencentyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span></span><br><span class="line"><span class="string">#deb-src http://mirrors.tencentyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span></span><br><span class="line"><span class="string">&#x27;</span><span class="string">&#x27;&#x27;</span> &gt; /etc/apt/sources.list</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker安装mysql</title>
      <link href="/2023/01/01/docker%E5%AE%89%E8%A3%85mysql/"/>
      <url>/2023/01/01/docker%E5%AE%89%E8%A3%85mysql/</url>
      
        <content type="html"><![CDATA[<ol><li>创建并启动MySQL服务容器</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql/mysql-server</span><br></pre></td></tr></table></figure><ol start="2"><li>这时使用宿主机连接没有授权访问，需要进入mysql修改mysql访问权限。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it mysql bash</span><br></pre></td></tr></table></figure><ol start="3"><li>登陆数据库</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br><span class="line">密码为123456</span><br></pre></td></tr></table></figure><ol start="4"><li>创建数据库用户quzard</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create user <span class="string">&#x27;quzard&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED with mysql_native_password by <span class="string">&#x27;123456&#x27;</span>;</span><br><span class="line">grant all privileges on *.* to <span class="string">&#x27;quzard&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">flush privileges;</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CNN原理基本学习</title>
      <link href="/2019/05/21/CNN%E5%8E%9F%E7%90%86%E5%9F%BA%E6%9C%AC%E5%AD%A6%E4%B9%A0/"/>
      <url>/2019/05/21/CNN%E5%8E%9F%E7%90%86%E5%9F%BA%E6%9C%AC%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1>1.基本架构</h1><p><img src="https://s2.loli.net/2023/02/18/sT8C2lmVirvMjyz.gif" alt=""></p><p>一个CNN网络一般都是卷积、池化、卷积、池化，…，全连接的模式。<br><img src="https://s2.loli.net/2023/02/18/kga1IohwZPJXuYE.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/S1E6Jht5niMQuWF.gif" alt=""></p><p>最简单的就是</p><p>卷积层（特征提取）→激活函数（为了加入非线性因素）→池化层（采样层，用于压缩数据）→全连接层（用于分类）→反向传播算法，前馈神经网络等调整卷积核参数</p><span id="more"></span><p>简单的神经元</p><p><img src="https://s2.loli.net/2023/02/18/NlWuAh6YJXTSzrQ.png" alt=""></p><p>一个三层神经网络结构</p><p><img src="https://s2.loli.net/2023/02/18/4h69GPJfnSgNv7E.png" alt=""></p><p>上图中最左边的原始输入信息称之为输入层，最右边的神经元称之为输出层（上图中输出层只有一个神经元），中间的叫隐藏层。</p><h1>2.卷积层</h1><p>用一张<strong>动态卷积图</strong>来说明下卷积的原理</p><p><img src="https://s2.loli.net/2023/02/18/3qNi19HkBhWQzSG.gif" alt=""></p><p>卷积公式：<br>$$<br>\displaystyle \int^{\infty}_{-\infty}{f(τ)g(x-τ)dτ}<br>$$<br>g(x)——卷积核</p><p>物理意义：系统的某一时刻的输出是由多个输入同时作用（叠加）而成的</p><p>例子：<br>$$<br>\frac{\partial f}{\partial x} = f(x+1)-f(x)<br>$$</p><p>$$<br>\frac{\partial^2 f}{\partial x^2} = f(x+1)+f(x-1)-2f(x)<br>$$</p><p>$$<br>\overrightarrow{\nabla}^2f=\frac{\partial^2 f}{\partial x^2}+\frac{\partial^2 f}{\partial y^2}=f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y)<br>$$</p><p>$$<br>\overrightarrow{\nabla}^2f——拉普拉斯算子，强调图像中的灰度突变，可用于突出图像边缘<br>$$</p><p>$$<br>\downarrow\downarrow<br>$$</p><p>$$<br>\left[ \begin{matrix} 0 &amp;1 &amp;0 \1 &amp; -4 &amp;1 \ 0 &amp; 1 &amp; 0\end{matrix} \right]<br>$$</p><p>$$<br>\downarrow\downarrow<br>$$</p><p>作为g(x)与原图像f(x)卷积，可以用来锐化图像</p><p><img src="https://s2.loli.net/2023/02/18/nLTrBgaGUY4bics.png" alt=""></p><p><strong>从这些案例中可以看出</strong></p><ol><li>原始图像通过与卷积核的数学运算，可以提取出图像的某些指定特征（features)</li><li>不同卷积核，提取的特征也是不一样的</li><li>即使提取的特征一样，不同的卷积核，效果也不一样</li></ol><p><strong>而CNN实际上也就是一个不断提取特征，进行特征选择，然后进行分类的过程，卷积在CNN里，就是充当前排步兵，首先对原始图像进行特征提取</strong></p><p>上动图中可以看出，一个5×5的原图与一个3×3的核（图中深红色部分）进行卷积，得到一个3×3的特征图。（此时，stride=2，padding= 1）</p><ul><li><code>stride</code>，一般称为步长。表示卷积核在图片上移动的格数。stride=1时，代表每次移动一格；stride=2时，则每次移动两格。有如下公式，</li></ul><p>$$<br>OutputSize=\frac{PictureSize−Kernel}{SizeStride}+1<br>$$</p><ul><li><code>padding</code>，即外围补0用以扩展图片。此时，<br>$$<br>OutputSize=\frac{PictureSize+2×Padding−KernelSize}{SizeStride}+1<br>$$</li></ul><p>一个3 * 3的source经过一个3 * 3的卷积核，特征映射成了一个1 * 1的特征值</p><p>卷积核代表了对应的权重</p><p>卷积核和图像进行点乘就代表卷积核里的权重单独对应到相应位置进行作用<br>$$<br>\displaystyle \sum^{}_{i}{w_ix_i=output}<br>$$</p><p>在CNN中卷积核的权重局部参数共享，通过反向传播来不断优化更新自己权重。</p><h1>3.激活函数</h1><p>由于线性函数具有可加性和齐次性</p><p>任意线性函数连接都可以等价为一个单一线性函数</p><p>所以线性神经网络没法解决非线性问题</p><p>我们就需要把线性神经网络，转成非线性的</p><p>我们从最简单的神经网络 Y = W×X +B入手，然后变成最简单的非线性神经网络Y = W×X×X+B</p><p>这是一个普通Y = X×X 的表达式</p><p><img src="https://s2.loli.net/2023/02/18/DNq9HVOTy2xUIkM.jpg" alt=""></p><p>Y = W×X×X+B 经过一系列运算（理想的）</p><p>我们得到了如下：</p><p><img src="https://s2.loli.net/2023/02/18/wJHAelZ4rdvODjy.jpg" alt=""></p><p>变成曲线后，好像可以把这两类区分开诶</p><p><img src="https://s2.loli.net/2023/02/18/b5uS67lnjmXwyJL.jpg" alt=""></p><p>我们需要算出输出误差error (output Y - target Y) 来更新权值</p><p>如果我们的神经网络函数是线性的，那么它的导数就是个常数，意味着梯度和X 无关了，也就是和输入无关了</p><p>我们在做反向传播的时候，梯度的改变也变成常数，和输入的改变X(delta(x)) 无关了</p><p>常见的激活函数</p><p><img src="https://s2.loli.net/2023/02/18/KrqFmn1lusdH3VO.jpg" alt=""></p><p>sigmoid 只会输出正数，以及靠近0的输出变化率最大，tanh和sigmoid不同的是，tanh输出可以是负数，ReLu是输入只能大于0,如果你输入含有负数，ReLu就不适合，如果你的输入是图片格式，ReLu就挺常用的。</p><p>其实卷积层的输出，是特征提取后的，特征值越大，说明特征越明显，特征值小的就可以用激活函数滤去了。我对激活函数的作用理解差不多就是这样。</p><p>取其精华去其糟粕。</p><h1>4.池化层</h1><p><img src="https://s2.loli.net/2023/02/18/1HUJANpxwPY6Eha.gif" alt=""></p><p>池化可以将一幅大的图像缩小，同时又保留其中的重要信息</p><p>它就是将输入图像进行缩小，减少像素信息，只保留重要信息</p><p>通常情况下，池化都是2×2大小，比如对于max-pooling来说，就是取输入图像中2×2大小的块中的最大值，作为结果的像素值，相当于将原始图像缩小了4倍(注：同理，对于average-pooling来说，就是取2×2大小块的平均值作为结果的像素值)</p><p><img src="https://s2.loli.net/2023/02/18/OaxwEmCBdKAlS83.png" alt=""></p><p>因为最大池化（max-pooling）保留了每一个小块内的最大值，所以它相当于保留了这一块最佳的匹配结果（因为值越接近1表示匹配越好）</p><p>这也就意味着它不会具体关注窗口内到底是哪一个地方匹配了，而只关注是不是有某个地方匹配上了</p><p>这也就能够看出，CNN能够发现图像中是否具有某种特征，而不用在意到底在哪里具有这种特征</p><p>通过加入池化层，可以很大程度上减少计算量，降低机器负载。</p><h1>5.全连接层</h1><p><img src="https://s2.loli.net/2023/02/18/UGkCxXWBt5YEfpV.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/CMJZu5R3xb9vDOp.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/cvQhiIjaLfCsJF7.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/6WxlcgVFJoizI5X.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/ZLFWU25rIstN7a4.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/alhLFwYJ43rCQdx.png" alt=""></p><p>全连接层也能够有很多个，如下：</p><p><img src="https://s2.loli.net/2023/02/18/pwWCq49B5Kg36tX.png" alt=""></p><p>【综合上述所有结构】<br>这一整个过程，从前到后，被称作”前向传播“，得到一组输出，然后通过反向传播来不断纠正错误，进行学习。</p><p><img src="https://s2.loli.net/2023/02/18/LZHIAWcrle3igtM.png" alt=""></p><h1>6.反向传播</h1><p>此处数学原理可以参见：深度学习 —— 反向传播理论推导.</p><p>反向传播可分为四部分，分别是前向传导、损失函数、后向传导，以及权重更新</p><p>在前向传导中，选择一张训练图像数组并让它通过整个网络</p><p>在第一个训练样例上，由于所有的权重或者过滤器值都是随机初始化的，输出可能会是 [.1 .1 .1 .1 .1 .1 .1 .1 .1 .1]，即一个不偏向任何数字的输出</p><p>损失函数有许多种定义方法，常见的一种是 MSE （均方误差）<br>$$<br>E_{total}=\sum\frac{1}{2}(target-output)^2<br>$$<br>我们需要找出是哪部分输入（例子中的权重）直接导致了网络的损失（或错误）</p><p>这是一个 dL/dW 的数学等式，W 是特定层级的权重。我们接下来要做的是在网络中进行后向传导，测定出是哪部分权重导致了最大的损失，寻找调整方法并减少损失。一旦计算出该导数，将进行最后一步也就是权重更新。所有的过滤器的权重将会更新，以便它们顺着梯度方向改变。<br>$$<br>w = w_i-\eta\frac{dL}{dW}<br>$$</p><p>$$<br>w = 权重\quad w_i=初始权重\quad\eta=学习速率<br>$$</p><p>学习速率是一个由程序员决定的参数。高学习速率意味着权重更新的动作更大，因此可能该模式将花费更少的时间收敛到最优权重。然而，学习速率过高会导致跳动过大，不够准确以致于达不到最优点。</p><p><img src="https://s2.loli.net/2023/02/18/8kI3iz1d7rMZvH5.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/BIMy7WlZ1bdGtEc.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/t7bPsX56YA4WxV2.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/ePCLymrYAfDTq6n.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/8FSpi5fM9uBUKeH.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/AC3uQx6kbrOsT4R.png" alt=""></p><h2 id="对于每个特征像素和投票权重，将其上下调整一下，看看错误如何变化">对于每个特征像素和投票权重，将其上下调整一下，看看错误如何变化</h2><p><img src="https://s2.loli.net/2023/02/18/U48my7igadGkTXW.png" alt=""></p><h2 id="我们需要设置的参数">我们需要设置的参数</h2><ul><li><p>卷积层</p><blockquote><p>卷积层数目</p><p>卷积层大小</p></blockquote></li><li><p>池化层</p><blockquote><p>窗口大小</p><p>补零数</p></blockquote></li><li><p>全连接层</p><blockquote><p>全连接层数目</p></blockquote></li></ul><p>样本<br><img src="https://s2.loli.net/2023/02/18/LWFATZhrkdtP2Sx.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/ift4G9BaCuV5zJ2.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/tiWbC16x9YIqkRw.png" alt=""></p><p><img src="https://s2.loli.net/2023/02/18/xX2nZkJySYv4p9r.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
          <category> CNN </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 深度学习 </tag>
            
            <tag> CNN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows虚拟桌面也挺好用</title>
      <link href="/2019/02/03/Windows%E8%99%9A%E6%8B%9F%E6%A1%8C%E9%9D%A2%E4%B9%9F%E6%8C%BA%E5%A5%BD%E7%94%A8/"/>
      <url>/2019/02/03/Windows%E8%99%9A%E6%8B%9F%E6%A1%8C%E9%9D%A2%E4%B9%9F%E6%8C%BA%E5%A5%BD%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="虚拟桌面能干什么？"><strong>虚拟桌面能干什么？</strong></h2><p><strong>虚拟桌面</strong>是一种窗口任务的虚拟分组方式，每个桌面就是一个分组。每创建一个虚拟桌面，就好像重新打开了一个Windows，你能够在一个全新的桌面环境下工作或学习。而之前桌面里打开的软件任务窗口，依然保留在那里，你可以随时切换回原来的桌面。</p><p><img src="https://s2.loli.net/2023/02/18/TRPwniAxt5UOl4q.png" alt="&quot;命令&quot;模式"></p><p><strong>虚拟桌面的目的在于对不同类型的应用窗口进行分类，使之同时保持前台显示而不致互相干扰。通俗的理解就是：把 N 台显示器塞进同一个显示器里头。</strong></p><p><strong>用途</strong></p><ul><li>以把所有<strong>开发程序</strong>的编辑器开在一个虚拟桌面里</li><li>把<strong>参考网站</strong>的浏览器开在一个桌面里</li><li>把微信之类的<strong>聊天应用</strong>开在另一个桌面里</li></ul><span id="more"></span><h2 id="快捷键入口"><strong>快捷键入口</strong></h2><p><strong>Win 键+Tab</strong>：打开任务视图，选择切换/创建 虚拟桌面。</p><p><strong>Win键+CTRL+D</strong>：创建新的虚拟桌面。</p><p><strong>Win键+CTRL+F4</strong>：删除当前虚拟桌面。</p><p><strong>Win键+CTRL+左键</strong>：切换到相邻左侧的虚拟桌面。</p><p><strong>Win键+CTRL+右键</strong>：切换到相邻右侧的虚拟桌面。</p><h2 id="清洁的任务栏"><strong>清洁的任务栏</strong></h2><p>窗口多了，任务栏显得拥挤不堪，即便合并了同类应用窗口也难以补救。</p><p>而虚拟桌面让任务栏的程序标签也跟着分门别类，换言之各个虚拟桌面只会显示其前台对应的程序标签，任务栏不会再密密麻麻。</p><h2 id="根据需求来调整">根据需求来调整</h2><p><strong>要用好虚拟桌面，需明确其目的是分类窗口以减少窗口堆砌带来的不便，则窗口的分类自然要依据窗口需求来进行。</strong></p><p>举个例子，日常文字类工作往往需要保持三类应用窗口开启：</p><ul><li>即时通讯类应用（如微信、QQ）</li><li>文字处理类应用（如 Office 全家桶、笔记类应用）</li><li>资料检索类应用（如浏览器、PDF 阅读器）</li></ul><p>比如即时通讯应用放在第一（左边）桌面，资料检索应用放在第三（右边）桌面，这么做符合左右切换桌面的逻辑。</p><p><img src="Windows%E8%99%9A%E6%8B%9F%E6%A1%8C%E9%9D%A2%E4%B9%9F%E6%8C%BA%E5%A5%BD%E7%94%A8/gif_1.gif" alt=""></p><p><strong>窗口拖入虚拟桌面</strong></p><p><img src="https://s2.loli.net/2023/02/18/rAysWRQNFOnqofe.gif" alt=""></p><h1>虚拟桌面的进阶用法</h1><p><strong>鼠标按键切换</strong>：这是一个最得心应手的方案，但需要你有一个拥有可自定义侧边按键的鼠标，在相应的鼠标控制软件中将侧边左键映射到快捷键Ctrl + Win + ←，右键反之。</p><p><img src="Windows%E8%99%9A%E6%8B%9F%E6%A1%8C%E9%9D%A2%E4%B9%9F%E6%8C%BA%E5%A5%BD%E7%94%A8/png_7.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> 使用技巧 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
